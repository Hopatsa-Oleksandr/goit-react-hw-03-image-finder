{"version":3,"sources":["Components/ImageGalleryItem/ImageGalleryItem.module.css","Components/Button/Button.module.css","Components/ImageGallery/ImageGallery.module.css","Components/Notify/Notify.module.css","App.module.css","Services/apiService.js","Components/Searchbar/Searchbar.js","Components/ImageGalleryItem/ImageGalleryItem.js","Components/ImageGallery/ImageGallery.js","Components/Notify/Notify.js","Components/Modal/Modal.js","Components/Button/Button.js","App.js","index.js","Components/Searchbar/Searchbar.module.css","Components/Modal/Modal.module.css"],"names":["module","exports","fetchImage","searchQuery","page","a","axios","get","response","data","Searchbar","state","changeInput","evt","setState","target","value","handleSubmit","preventDefault","props","onSubmit","this","className","s","SearchForm","type","button","label","input","autoComplete","autoFocus","placeholder","onChange","Component","ImageGalleryItem","image","src","webformatURL","alt","tags","data-imageurl","largeImageURL","ImageGallery","images","toggleModal","onClick","currentTarget","status","dataset","imageurl","map","id","Notify","message","Modal","checkEvent","key","window","addEventListener","removeEventListener","Overlay","img","Button","buttonBox","App","totalHits","isLoading","error","emptyNotify","showPopup","showButton","targetImage","onButtonMoreClick","prevState","checkButtonAndNotify","length","searchImages","prevProps","then","hits","scrollTo","top","document","documentElement","scrollHeight","behavior","catch","finally","color","height","width","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.d02ba143.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"ImageGalleryItem\":\"ImageGalleryItem_ImageGalleryItem__xL0QY\",\"image\":\"ImageGalleryItem_image__2PQ_z\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"buttonBox\":\"Button_buttonBox__3yQ2X\",\"Button\":\"Button_Button__3tSWf\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"ImageGallery\":\"ImageGallery_ImageGallery__1shV4\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Notify\":\"Notify_Notify__wCWBu\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"App\":\"App_App__27-DI\"};","import axios from 'axios';\n\nconst KEY = '19032904-74cd0d38bd211043e9b213612';\n\nconst fetchImage = async (searchQuery, page) => {\n  const response = await axios.get(\n    `https://pixabay.com/api/?q=${searchQuery}&page=${page}&key=${KEY}&image_type=photo&orientation=horizontal&per_page=12`,\n  );\n  return response.data;\n};\n\nexport default fetchImage;\n","import React, { Component } from 'react';\nimport s from './Searchbar.module.css';\n\nclass Searchbar extends Component {\n  state = {\n    searchQuery: '',\n  };\n\n  changeInput = evt => {\n    this.setState({ searchQuery: evt.target.value });\n  };\n\n  handleSubmit = evt => {\n    evt.preventDefault();\n\n    this.props.onSubmit(this.state.searchQuery);\n  };\n\n  render() {\n    const { searchQuery } = this.state;\n\n    return (\n      <header className={s.Searchbar}>\n        <form className={s.SearchForm} onSubmit={this.handleSubmit}>\n          <button type=\"submit\" className={s.button}>\n            <span className={s.label}>Search</span>\n          </button>\n\n          <input\n            className={s.input}\n            type=\"text\"\n            autoComplete=\"off\"\n            autoFocus\n            placeholder=\"Поск изображений и фото\"\n            value={searchQuery}\n            onChange={this.changeInput}\n          />\n        </form>\n      </header>\n    );\n  }\n}\n\nexport default Searchbar;\n","import React from 'react';\nimport s from './ImageGalleryItem.module.css';\n\nconst ImageGalleryItem = ({ image }) => {\n  return (\n    <li className={s.ImageGalleryItem}>\n      <img\n        src={image.webformatURL}\n        alt={image.tags}\n        data-imageurl={image.largeImageURL}\n        className={s.image}\n      />\n    </li>\n  );\n};\n\nexport default ImageGalleryItem;\n","import React from 'react';\nimport ImageGalleryItem from '../ImageGalleryItem';\nimport s from './ImageGallery.module.css';\n\nconst ImageGallery = ({ images, toggleModal }) => {\n  const checkEvent = evt => {\n    if (evt.target !== evt.currentTarget) {\n      toggleModal({\n        status: true,\n        src: evt.target.dataset.imageurl,\n        alt: evt.target.alt,\n      });\n    }\n  };\n\n  return (\n    <ul className={s.ImageGallery} onClick={checkEvent}>\n      {images.map(image => (\n        <ImageGalleryItem image={image} key={image.id} />\n      ))}\n    </ul>\n  );\n};\n\nexport default ImageGallery;\n","import React from 'react';\nimport s from './Notify.module.css';\n\nconst Notify = ({ message }) => {\n  return <p className={s.Notify}>{message}</p>;\n};\n\nexport default Notify;\n","import React, { Component } from 'react';\nimport s from './Modal.module.css';\n\nclass Modal extends Component {\n  componentDidMount() {\n    window.addEventListener('keydown', this.checkEvent);\n  }\n\n  componentWillUnmount() {\n    window.removeEventListener('keydown', this.checkEvent);\n  }\n\n  checkEvent = evt => {\n    if (evt.key === 'Escape' || evt.target === evt.currentTarget) {\n      this.props.toggleModal({ status: false });\n    }\n  };\n\n  render() {\n    const { src, alt } = this.props;\n\n    return (\n      <div className={s.Overlay} onClick={this.checkEvent}>\n        <div className={s.Modal}>\n          <img className={s.img} src={src} alt={alt} />\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default Modal;\n","import React from 'react';\nimport s from './Button.module.css';\n\nconst Button = ({ onClick }) => {\n  return (\n    <div className={s.buttonBox}>\n      <button type=\"button\" className={s.Button} onClick={onClick}>\n        Load more\n      </button>\n    </div>\n  );\n};\n\nexport default Button;\n","import React, { Component } from 'react';\nimport Loader from 'react-loader-spinner';\nimport fetchImage from './Services/apiService';\nimport Searchbar from './Components/Searchbar';\nimport ImageGallery from './Components/ImageGallery';\nimport Notify from './Components/Notify';\nimport Modal from './Components/Modal';\nimport Button from './Components/Button';\nimport s from './App.module.css';\n\nclass App extends Component {\n  state = {\n    images: [],\n    totalHits: 0,\n    searchQuery: '',\n    page: 1,\n    isLoading: false,\n    error: null,\n    emptyNotify: false,\n    showPopup: false,\n    showButton: false,\n    targetImage: null,\n  };\n\n  componentDidMount() {\n    this.searchImages();\n  }\n\n  componentDidUpdate(prevProps, prevState) {\n    if (prevState.searchQuery !== this.state.searchQuery) {\n      this.setState({ page: 1 });\n      this.searchImages();\n    }\n    if (prevState.page !== this.state.page) {\n      this.searchImages();\n    }\n  }\n\n  searchImages() {\n    const { searchQuery, page } = this.state;\n\n    this.setState({ isLoading: true });\n\n    fetchImage(searchQuery, page)\n      .then(data => {\n        if (page === 1) {\n          this.setState({\n            totalHits: data.totalHits,\n            images: data.hits,\n          });\n        } else {\n          this.setState(prevState => ({\n            images: [...prevState.images, ...data.hits],\n          }));\n          window.scrollTo({\n            top: document.documentElement.scrollHeight,\n            behavior: 'smooth',\n          });\n        }\n        this.checkButtonAndNotify();\n      })\n      .catch(error => this.setState({ error }))\n      .finally(() => this.setState({ isLoading: false }));\n  }\n\n  onSubmit = value => {\n    this.setState({ searchQuery: value });\n  };\n\n  onButtonMoreClick = () => {\n    this.setState(prevState => ({\n      page: prevState.page + 1,\n    }));\n  };\n\n  checkButtonAndNotify = () => {\n    const { totalHits, images } = this.state;\n\n    if (totalHits > images.length) {\n      this.setState({ showButton: true });\n    } else {\n      this.setState({ showButton: false });\n    }\n\n    if (!totalHits) {\n      this.setState({ emptyNotify: true });\n    } else {\n      this.setState({ emptyNotify: false });\n    }\n  };\n\n  toggleModal = ({ status, src, alt }) => {\n    if (status) {\n      this.setState({\n        targetImage: { src, alt },\n        showPopup: true,\n      });\n    } else {\n      this.setState({\n        targetImage: null,\n        showPopup: false,\n      });\n    }\n  };\n\n  render() {\n    const {\n      images,\n      isLoading,\n      error,\n      emptyNotify,\n      showPopup,\n      targetImage,\n      showButton,\n    } = this.state;\n\n    return (\n      <div className={s.App}>\n        <Searchbar onSubmit={this.onSubmit} />\n        {error && <Notify message={`Что-то не так: ${error.message}`} />}\n        {isLoading && (\n          <Loader type=\"BallTriangle\" color=\"#e91616\" height={80} width={80} />\n        )}\n        {images.length > 0 && (\n          <ImageGallery images={images} toggleModal={this.toggleModal} />\n        )}\n        {emptyNotify && (\n          <Notify message=\"Ничего не найдено, попробуй еще раз.\" />\n        )}\n        {showPopup && (\n          <Modal\n            src={targetImage.src}\n            alt={targetImage.alt}\n            toggleModal={this.toggleModal}\n          />\n        )}\n        {showButton && <Button onClick={this.onButtonMoreClick} />}\n      </div>\n    );\n  }\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root'),\n);\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Searchbar\":\"Searchbar_Searchbar__erTUV\",\"SearchForm\":\"Searchbar_SearchForm__3jqMC\",\"button\":\"Searchbar_button__1Zwva\",\"label\":\"Searchbar_label__2k_rC\",\"input\":\"Searchbar_input__2J61u\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Overlay\":\"Modal_Overlay__x45tN\",\"Modal\":\"Modal_Modal__xk9QW\"};"],"sourceRoot":""}